{
  "$schema": "./schemas/meta-template.schema.json",
  "version": "1.0.0",
  "name": "Multi-Tool Query Meta Template",
  "description": "Unified query configuration for Linear, GitHub, Maestroverse, and other tooling",

  "defaults": {
    "output_format": "json",
    "max_results": 100,
    "include_metadata": true,
    "cache_ttl": 300
  },

  "services": {
    "linear": {
      "enabled": true,
      "base_url": "https://api.linear.app/graphql",
      "auth": {
        "type": "bearer",
        "env_var": "LINEAR_API_KEY"
      },
      "default_workspace": "",
      "schema_file": "./schemas/linear.schema.json"
    },

    "github": {
      "enabled": true,
      "base_url": "https://api.github.com",
      "graphql_url": "https://api.github.com/graphql",
      "auth": {
        "type": "bearer",
        "env_var": "GITHUB_TOKEN"
      },
      "default_owner": "",
      "default_repo": "",
      "schema_file": "./schemas/github.schema.json"
    },

    "maestroverse": {
      "enabled": true,
      "base_url": "https://api.maestroverse.io",
      "auth": {
        "type": "api_key",
        "env_var": "MAESTROVERSE_API_KEY",
        "header": "X-API-Key"
      },
      "default_project": "",
      "schema_file": "./schemas/maestroverse.schema.json"
    }
  },

  "query_templates": {
    "all_open_items": {
      "description": "Get all open items across all services",
      "queries": [
        {
          "service": "linear",
          "template": "open_issues"
        },
        {
          "service": "github",
          "template": "open_issues"
        },
        {
          "service": "github",
          "template": "open_prs"
        },
        {
          "service": "maestroverse",
          "template": "active_tasks"
        }
      ]
    },

    "my_assignments": {
      "description": "Get all items assigned to me",
      "queries": [
        {
          "service": "linear",
          "template": "my_issues"
        },
        {
          "service": "github",
          "template": "my_issues"
        },
        {
          "service": "github",
          "template": "my_prs"
        },
        {
          "service": "maestroverse",
          "template": "my_tasks"
        }
      ]
    },

    "recent_activity": {
      "description": "Get recent activity across all services",
      "params": {
        "days": 7
      },
      "queries": [
        {
          "service": "linear",
          "template": "recent_updates"
        },
        {
          "service": "github",
          "template": "recent_commits"
        },
        {
          "service": "github",
          "template": "recent_prs"
        },
        {
          "service": "maestroverse",
          "template": "recent_activity"
        }
      ]
    },

    "search": {
      "description": "Search across all services",
      "params": {
        "query": ""
      },
      "queries": [
        {
          "service": "linear",
          "template": "search"
        },
        {
          "service": "github",
          "template": "search_code"
        },
        {
          "service": "github",
          "template": "search_issues"
        },
        {
          "service": "maestroverse",
          "template": "search"
        }
      ]
    },

    "sprint_status": {
      "description": "Get current sprint/cycle status",
      "queries": [
        {
          "service": "linear",
          "template": "current_cycle"
        },
        {
          "service": "github",
          "template": "current_milestone"
        },
        {
          "service": "maestroverse",
          "template": "current_sprint"
        }
      ]
    },

    "blocked_items": {
      "description": "Get all blocked items",
      "queries": [
        {
          "service": "linear",
          "template": "blocked_issues"
        },
        {
          "service": "github",
          "template": "blocked_issues"
        },
        {
          "service": "maestroverse",
          "template": "blocked_tasks"
        }
      ]
    },

    "sbom_audit": {
      "description": "Software Bill of Materials - dependency audit",
      "bom_type": "sbom",
      "queries": [
        {
          "service": "github",
          "template": "dependency_graph"
        },
        {
          "service": "github",
          "template": "security_vulnerabilities"
        },
        {
          "service": "linear",
          "template": "dependency_issues"
        }
      ]
    },

    "abom_catalog": {
      "description": "Application Bill of Materials - app/service catalog",
      "bom_type": "abom",
      "queries": [
        {
          "service": "github",
          "template": "repository_catalog"
        },
        {
          "service": "linear",
          "template": "project_catalog"
        },
        {
          "service": "maestroverse",
          "template": "service_catalog"
        }
      ]
    },

    "pbom_insights": {
      "description": "People Bill of Materials - developer insights",
      "bom_type": "pbom",
      "queries": [
        {
          "service": "github",
          "template": "contributor_stats"
        },
        {
          "service": "linear",
          "template": "team_metrics"
        },
        {
          "service": "maestroverse",
          "template": "developer_activity"
        }
      ]
    },

    "hbom_inventory": {
      "description": "Hardware Bill of Materials - device inventory",
      "bom_type": "hbom",
      "queries": [
        {
          "service": "github",
          "template": "test_matrix"
        },
        {
          "service": "linear",
          "template": "device_issues"
        }
      ]
    },

    "ibom_permissions": {
      "description": "Identity Bill of Materials - permission audit",
      "bom_type": "ibom",
      "queries": [
        {
          "service": "github",
          "template": "entitlements_scan"
        },
        {
          "service": "linear",
          "template": "privacy_issues"
        }
      ]
    },

    "dbom_lineage": {
      "description": "Data Bill of Materials - dataset lineage",
      "bom_type": "dbom",
      "queries": [
        {
          "service": "github",
          "template": "data_files"
        },
        {
          "service": "maestroverse",
          "template": "data_pipelines"
        }
      ]
    },

    "cbom_compliance": {
      "description": "Compliance Bill of Materials - regulatory status",
      "bom_type": "cbom",
      "queries": [
        {
          "service": "linear",
          "template": "compliance_issues"
        },
        {
          "service": "github",
          "template": "privacy_manifests"
        },
        {
          "service": "maestroverse",
          "template": "compliance_projects"
        }
      ]
    },

    "obom_metrics": {
      "description": "Observability Bill of Materials - performance metrics",
      "bom_type": "obom",
      "queries": [
        {
          "service": "github",
          "template": "workflow_metrics"
        },
        {
          "service": "maestroverse",
          "template": "execution_metrics"
        }
      ]
    },

    "wbom_pipelines": {
      "description": "Workflow Bill of Materials - pipeline inventory",
      "bom_type": "wbom",
      "queries": [
        {
          "service": "github",
          "template": "workflow_inventory"
        },
        {
          "service": "maestroverse",
          "template": "orchestration_catalog"
        }
      ]
    },

    "bom_complete_inventory": {
      "description": "Complete BOM inventory across all 9 types",
      "queries": [
        {
          "service": "github",
          "template": "full_inventory"
        },
        {
          "service": "linear",
          "template": "full_inventory"
        },
        {
          "service": "maestroverse",
          "template": "full_inventory"
        }
      ]
    }
  },

  "aggregation": {
    "merge_strategy": "unified",
    "sort_by": "updated_at",
    "sort_order": "desc",
    "dedup_by": ["external_url", "title"]
  },

  "notifications": {
    "enabled": false,
    "channels": ["slack", "email"],
    "triggers": {
      "new_assignment": true,
      "mention": true,
      "status_change": true
    }
  },

  "bom_config": {
    "enabled": true,
    "taxonomy_file": "./bom-taxonomy.json",
    "types": {
      "sbom": { "enabled": true, "priority": "high" },
      "abom": { "enabled": true, "priority": "high" },
      "pbom": { "enabled": true, "priority": "medium" },
      "hbom": { "enabled": true, "priority": "medium" },
      "ibom": { "enabled": true, "priority": "high" },
      "dbom": { "enabled": true, "priority": "medium" },
      "cbom": { "enabled": true, "priority": "high" },
      "obom": { "enabled": true, "priority": "medium" },
      "wbom": { "enabled": true, "priority": "medium" }
    },
    "cross_bom_analysis": {
      "enabled": true,
      "impact_tracking": true,
      "dependency_mapping": true
    }
  },

  "custom_fields": {
    "priority_mapping": {
      "linear": {
        "0": "none",
        "1": "urgent",
        "2": "high",
        "3": "medium",
        "4": "low"
      },
      "github": {
        "labels": ["priority:critical", "priority:high", "priority:medium", "priority:low"]
      },
      "maestroverse": {
        "P0": "critical",
        "P1": "high",
        "P2": "medium",
        "P3": "low"
      }
    },
    "status_mapping": {
      "open": ["Open", "Todo", "Backlog", "In Progress", "open", "active"],
      "in_progress": ["In Progress", "In Review", "in_progress", "working"],
      "done": ["Done", "Closed", "Completed", "closed", "merged", "complete"],
      "blocked": ["Blocked", "On Hold", "blocked", "waiting"]
    }
  }
}
